#+title: 测速实验结果记录
#+date: Wed Apr 19 11:39:12 2023
#+author: Zi Liang
#+email: liangzid@stu.xjtu.edu.cn
#+latex_class: elegantpaper


* 速度测试表格
** TODO GPT 124M MSL=128 
*** REVIEW mpcFormer softmax2relu

keys:['EmbedTime', 'LinearTime', 'SoftmaxTime', 'ActivTime', 'GenerationTime', 'total_time']
NotFound: ActivTime
NotFound: GenerationTime
=====MEAN====
319.8215516090393       252.37204604148866      184.05470366477965      -1      -1      1005.8528663158417
=====VAR====
2.3414402948106363      1.1198668442550208      1.949732402257664       -1      -1      23.718402584270656
=====MIN====
317.43425393104553      251.0783405303955       181.82295298576355      -1      -1      997.6292395591736
=====MAX====
321.51552414894104      254.06304931640625      185.66380882263184      -1      -1      1011.8063061237335
keys:['EmbedCommTime', 'LinearCommTime', 'SoftmaxCommTime', 'ActivCommTime', 'GenerationCommTime', 'total_time']
NotFound: ActivCommTime
NotFound: GenerationCommTime
=====MEAN====
52.118535993946715      74.9420108828228        47.433782088384035      -1      -1      1005.8528663158417
=====VAR====
0.33266453191433965     0.8554810945250255      0.6150837156126682      -1      -1      23.718402584270656
=====MIN====
51.46370592981111       74.0929973575985        46.40771150740329       -1      -1      997.6292395591736
=====MAX====
52.88494317396544       76.19254402804654       48.323076481116004      -1      -1      1011.8063061237335
keys:['ËmbedCommByte', 'LinearCommByte', 'SoftmaxCommByte', 'ActivCommByte', 'GenerationCommByte']
NotFound: ActivCommByte
NotFound: GenerationCommByte
=====MEAN====
76679316208.0   171111642624.0  582704640.0     -1      -1
=====VAR====
0.0     0.0     0.0     -1      -1
=====MIN====
76679316208.0   171111642624.0  582704640.0     -1      -1
=====MAX====
76679316208.0   171111642624.0  582704640.0     -1      -1
-------------
defaultdict(<class 'float'>, {'EmbedTime': 319.8215516090393, 'EmbedCommTime': 52.118535993946715, 'ËmbedCommByte': 73127.09446716309, 'NormTime': 26.289513206481935, 'NormCommTime': 5.410083906538785, 'NormCommByte': 147.0703125, 'LinearTime': 252.37204604148866, 'LinearCommTime': 74.9420108828228, 'LinearCommByte': 163184.77880859375, 'SoftmaxTime': 184.05470366477965, 'SoftmaxCommTime': 47.433782088384035, 'SoftmaxCommByte': 555.71044921875, 'ActTime': 6.764379024505615, 'ActCommTime': 1.4096253681229427, 'ActCommByte': 142.875, 'GenerateOtherTime': 212.10938048362732, 'GenerateOtherCommTime': 58.063163882261144, 'GenerateOtherCommByte': 87658.21520996094, 'total_time': 1005.8528663158417})


*** REVIEW mpcFormer softmax2quad


keys:['EmbedTime', 'LinearTime', 'SoftmaxTime', 'ActivTime', 'GenerationTime', 'total_time']
NotFound: ActivTime
NotFound: GenerationTime
=====MEAN====
320.53231887817384      251.3868923187256       155.19955520629884      -1      -1      977.5351450920105
=====VAR====
7.403922806324009       1.4195031283214121      4.823657804431227       -1      -1      68.98313588646103
=====MIN====
316.02940225601196      250.11983227729797      152.2602310180664       -1      -1      964.7855942249298
=====MAX====
323.29246830940247      253.33942198753357      157.74813580513 -1      -1      987.9342453479767
keys:['EmbedCommTime', 'LinearCommTime', 'SoftmaxCommTime', 'ActivCommTime', 'GenerationCommTime', 'total_time']
NotFound: ActivCommTime
NotFound: GenerationCommTime
=====MEAN====
51.34580582571216       73.66676102636848       38.234425517357884      -1      -1      977.5351450920105
=====VAR====
1.7917394476371757      1.8275823946347125      1.718624861214823       -1      -1      68.98313588646103
=====MIN====
49.182311396463774      71.95942993252538       36.73911873996258       -1      -1      964.7855942249298
=====MAX====
52.99812608328648       75.81253248406574       40.09132688655518       -1      -1      987.9342453479767
keys:['ËmbedCommByte', 'LinearCommByte', 'SoftmaxCommByte', 'ActivCommByte', 'GenerationCommByte']
NotFound: ActivCommByte
NotFound: GenerationCommByte
=====MEAN====
76679316208.0   171111642624.0  76704768.0      -1      -1
=====VAR====
0.0     0.0     0.0     -1      -1
=====MIN====
76679316208.0   171111642624.0  76704768.0      -1      -1
=====MAX====
76679316208.0   171111642624.0  76704768.0      -1      -1
-------------
defaultdict(<class 'float'>, {'EmbedTime': 320.53231887817384, 'EmbedCommTime': 51.34580582571216, 'ËmbedCommByte': 73127.09446716309, 'NormTime': 26.37512001991272, 'NormCommTime': 5.325118317920714, 'NormCommByte': 147.0703125, 'LinearTime': 251.3868923187256, 'LinearCommTime': 73.66676102636848, 'LinearCommByte': 163184.77880859375, 'SoftmaxTime': 155.19955520629884, 'SoftmaxCommTime': 38.234425517357884, 'SoftmaxCommByte': 73.1513671875, 'ActTime': 6.7954856872558596, 'ActCommTime': 1.331895143329166, 'ActCommByte': 142.875, 'GenerateOtherTime': 212.7982397556305, 'GenerateOtherCommTime': 57.160964252823035, 'GenerateOtherCommByte': 87658.21520996094, 'total_time': 977.5351450920105})






*** DONE THE-X
CLOSED: [2023-04-20 周四 13:44]
keys:['EmbedTime', 'LinearTime', 'SoftmaxTime', 'ActivTime', 'GenerationTime', 'total_time']
NotFound: ActivTime
NotFound: GenerationTime
=====MEAN====
329.29845185279845      258.003651714325        87.71049041748047       -1      -1      965.7858202934265
=====VAR====
58.97475875867417       4.893799006642748       8.634032428752004       -1      -1      419.6304740312783
=====MIN====
316.3728108406067       254.57758045196533      82.64787769317627       -1      -1      931.3671236038208
=====MAX====
335.5215051174164       261.04002046585083      90.31552648544312       -1      -1      986.8706562519073
keys:['EmbedCommTime', 'LinearCommTime', 'SoftmaxCommTime', 'ActivCommTime', 'GenerationCommTime', 'total_time']
NotFound: ActivCommTime
NotFound: GenerationCommTime
=====MEAN====
58.30198747811373       80.20795319583267       19.280689470353536      -1      -1      965.7858202934265
=====VAR====
6.670069849455028       1.789784673966881       1.3159171398767509      -1      -1      419.6304740312783
=====MIN====
53.84767633641604       78.93134678574279       17.26757018349599       -1      -1      931.3671236038208
=====MAX====
61.23126297094859       82.77877928537782       20.6635869393358        -1      -1      986.8706562519073
keys:['ËmbedCommByte', 'LinearCommByte', 'SoftmaxCommByte', 'ActivCommByte', 'GenerationCommByte']
NotFound: ActivCommByte
NotFound: GenerationCommByte
=====MEAN====
76679316208.0   171111642624.0  635249664.0     -1      -1
=====VAR====
0.0     0.0     0.0     -1      -1
=====MIN====
76679316208.0   171111642624.0  635249664.0     -1      -1
=====MAX====
76679316208.0   171111642624.0  635249664.0     -1      -1
-------------
defaultdict(<class 'float'>, {'EmbedTime': 329.29845185279845, 'EmbedCommTime': 58.30198747811373, 'ËmbedCommByte': 73127.09446716309, 'NormTime': 27.502546787261963, 'NormCommTime': 6.141579707874916, 'NormCommByte': 147.0703125, 'LinearTime': 258.003651714325, 'LinearCommTime': 80.20795319583267, 'LinearCommByte': 163184.77880859375, 'SoftmaxTime': 87.71049041748047, 'SoftmaxCommTime': 19.280689470353536, 'SoftmaxCommByte': 605.8212890625, 'ActTime': 35.925034046173096, 'ActCommTime': 11.346552159520797, 'ActCommByte': 2071.6875, 'GenerateOtherTime': 222.7196361541748, 'GenerateOtherCommTime': 65.18890619704034, 'GenerateOtherCommByte': 87658.21520996094, 'total_time': 965.7858202934265})
*** DONE Vanilla GPT-2
CLOSED: [2023-04-20 周四 14:23]
keys:['EmbedTime', 'LinearTime', 'SoftmaxTime', 'ActivTime', 'GenerationTime', 'total_time']
NotFound: ActivTime
NotFound: GenerationTime
=====MEAN====
321.4412048339844       251.9342824459076       454.61146659851073      -1      -1      1328.2569969654082
=====VAR====
36.898634971897366      2.9265693838588187      135.83732208280645      -1      -1      537.4222229759118
=====MIN====
312.8062696456909       249.71651768684387      439.55513882637024      -1      -1      1298.2677314281464
=====MAX====
330.6566083431244       253.84310221672058      473.84014201164246      -1      -1      1367.7119669914246
keys:['EmbedCommTime', 'LinearCommTime', 'SoftmaxCommTime', 'ActivCommTime', 'GenerationCommTime', 'total_time']
NotFound: ActivCommTime
NotFound: GenerationCommTime
=====MEAN====
52.33051069527865       74.20912569777575       113.96074670569506      -1      -1      1328.2569969654082
=====VAR====
2.7280445434011678      3.7664714183676105      17.205931380977738      -1      -1      537.4222229759118
=====MIN====
50.43774164549541       71.84809336054605       109.40639499016106      -1      -1      1298.2677314281464
=====MAX====
55.41844620904885       76.56424366752617       121.75036075606477      -1      -1      1367.7119669914246
keys:['ËmbedCommByte', 'LinearCommByte', 'SoftmaxCommByte', 'ActivCommByte', 'GenerationCommByte']
NotFound: ActivCommByte
NotFound: GenerationCommByte
=====MEAN====
76679316208.0   171111642624.0  1741351680.0    -1      -1
=====VAR====
0.0     0.0     0.0     -1      -1
=====MIN====
76679316208.0   171111642624.0  1741351680.0    -1      -1
=====MAX====
76679316208.0   171111642624.0  1741351680.0    -1      -1
-------------
defaultdict(<class 'float'>, {'EmbedTime': 321.4412048339844, 'EmbedCommTime': 52.33051069527865, 'ËmbedCommByte': 73127.09446716309, 'NormTime': 26.41507830619812, 'NormCommTime': 5.574865391710773, 'NormCommByte': 147.0703125, 'LinearTime': 251.9342824459076, 'LinearCommTime': 74.20912569777575, 'LinearCommByte': 163184.77880859375, 'SoftmaxTime': 454.61146659851073, 'SoftmaxCommTime': 113.96074670569506, 'SoftmaxCommByte': 1660.682373046875, 'ActTime': 55.4467942237854, 'ActCommTime': 14.443050337419844, 'ActCommByte': 4500.5625, 'GenerateOtherTime': 213.9932490825653, 'GenerateOtherCommTime': 58.767931226803924, 'GenerateOtherCommByte': 87658.21520996094, 'total_time': 1328.2569969654082})
*** REVIEW merge with res version
keys:['EmbedTime', 'LinearTime', 'SoftmaxTime', 'ActivTime', 'GenerationTime', 'total_time']
NotFound: SoftmaxTime
=====MEAN====
5.15585503578186        148.70792598724364      -1      6.542934942245483       0.9499017238616944      162.48278713226318
=====VAR====
0.005221166595074465    1.4702416567442333      -1      0.0031444089302885914   0.0031401472380503037   1.848605442944813
=====MIN====
5.053839921951294       147.79524898529053      -1      6.4647533893585205      0.8986461162567139      161.45052099227905
=====MAX====
5.280372381210327       150.9132342338562       -1      6.597078084945679       1.0549054145812988      164.96672129631042
keys:['EmbedCommTime', 'LinearCommTime', 'SoftmaxCommTime', 'ActivCommTime', 'GenerationCommTime', 'total_time']
NotFound: SoftmaxCommTime
=====MEAN====
0.8552202220540494      51.47048560839612       -1      1.3477199304616079      0.26079520042985677     162.48278713226318
=====VAR====
0.004294290573576503    1.4226864923695117      -1      0.00469427817059027     0.0024961370506109927   1.848605442944813
=====MIN====
0.7883476257557049      50.53581283194944       -1      1.2506831790087745      0.21304968604817986     161.45052099227905
=====MAX====
0.9683712739497423      53.625820887624286      -1      1.4375994709553197      0.35267581103835255     164.96672129631042
keys:['ËmbedCommByte', 'LinearCommByte', 'SoftmaxCommByte', 'ActivCommByte', 'GenerationCommByte']
NotFound: SoftmaxCommByte
=====MEAN====
1238332480.0    118003562688.0  -1      149815296.0     619118592.0
=====VAR====
0.0     0.0     -1      0.0     0.0
=====MIN====
1238332480.0    118003562688.0  -1      149815296.0     619118592.0
=====MAX====
1238332480.0    118003562688.0  -1      149815296.0     619118592.0
-------------

*** DONE merge only ER
CLOSED: [2023-04-20 周四 13:43]

keys:['EmbedTime', 'LinearTime', 'SoftmaxTime', 'ActivTime', 'GenerationTime', 'total_time']
NotFound: ActivTime
NotFound: GenerationTime
=====MEAN====
5.4145105361938475      260.35919818878176      477.76509685516356      -1      -1      834.1264422893524
=====VAR====
0.016348981280825684    2.3429828899121414      21.43041941366117       -1      -1      33.218130666493096
=====MIN====
5.221645355224609       258.39573097229004      470.647887468338        -1      -1      824.3343379497528
=====MAX====
5.5963568687438965      262.9959020614624       483.65975522994995      -1      -1      840.3776621818542
keys:['EmbedCommTime', 'LinearCommTime', 'SoftmaxCommTime', 'ActivCommTime', 'GenerationCommTime', 'total_time']
NotFound: ActivCommTime
NotFound: GenerationCommTime
=====MEAN====
0.953561028954573       80.00472706507426       124.83331272688228      -1      -1      834.1264422893524
=====VAR====
0.003995419802254666    1.73747618002999        2.4432525158001432      -1      -1      33.218130666493096
=====MIN====
0.9024600171251222      78.74703175248578       122.59493040759116      -1      -1      824.3343379497528
=====MAX====
1.0759945795871317      82.38964712503366       126.63504987291526      -1      -1      840.3776621818542
keys:['ËmbedCommByte', 'LinearCommByte', 'SoftmaxCommByte', 'ActivCommByte', 'GenerationCommByte']
NotFound: ActivCommByte
NotFound: GenerationCommByte
=====MEAN====
1238332480.0    172471474944.0  1740798720.0    -1      -1
=====VAR====
0.0     0.0     0.0     -1      -1
=====MIN====
1238332480.0    172471474944.0  1740798720.0    -1      -1
=====MAX====
1238332480.0    172471474944.0  1740798720.0    -1      -1
-------------
defaultdict(<class 'float'>, {'EmbedTime': 5.4145105361938475, 'EmbedCommTime': 0.953561028954573, 'ËmbedCommByte': 1180.9658813476562, 'NormTime': 27.025830841064455, 'NormCommTime': 6.09261630277615, 'NormCommByte': 141.890625, 'LinearTime': 260.35919818878176, 'LinearCommTime': 80.00472706507426, 'LinearCommByte': 164481.61596679688, 'SoftmaxTime': 477.76509685516356, 'SoftmaxCommTime': 124.83331272688228, 'SoftmaxCommByte': 1660.155029296875, 'ActTime': 58.43527755737305, 'ActCommTime': 15.887179852626286, 'ActCommByte': 4500.5625, 'GenerateTime': 0.7896572113037109, 'GenerateCommTime': 0.26304320264607667, 'GenerateCommByte': 588.9609375, 'total_time': 834.1264422893524})


*** REVIEW merge only MM
keys:['EmbedTime', 'LinearTime', 'SoftmaxTime', 'ActivTime', 'GenerationTime', 'total_time']
NotFound: SoftmaxTime
NotFound: GenerationTime
=====MEAN====
338.86435160636904      243.31016793251038      -1      59.39364347457886       -1      774.0945526599884
=====VAR====
4.304253125019899       0.3712003502773905      -1      0.32637885564432967     -1      20.625300134068873
=====MIN====
335.467059135437        242.17496418952942      -1      58.28877544403076       -1      766.173858165741
=====MAX====
341.2851436138153       243.94389581680298      -1      59.92918610572815       -1      779.0358774662018
keys:['EmbedCommTime', 'LinearCommTime', 'SoftmaxCommTime', 'ActivCommTime', 'GenerationCommTime', 'total_time']
NotFound: SoftmaxCommTime
NotFound: GenerationCommTime
=====MEAN====
59.00809236296918       79.64493292360567       -1      16.360449552861972      -1      774.0945526599884
=====VAR====
0.435878231311542       0.2007027710082169      -1      0.05885753271948939     -1      20.625300134068873
=====MIN====
57.74088239995763       78.9228423081804        -1      15.9371268019313        -1      766.173858165741
=====MAX====
59.649207924026996      80.32811553624924       -1      16.65567391156219       -1      779.0358774662018
keys:['ËmbedCommByte', 'LinearCommByte', 'SoftmaxCommByte', 'ActivCommByte', 'GenerationCommByte']
NotFound: SoftmaxCommByte
NotFound: GenerationCommByte
=====MEAN====
77296874224.0   194582280384.0  -1      4719181824.0    -1
=====VAR====
0.0     0.0     -1      0.0     -1
=====MIN====
77296874224.0   194582280384.0  -1      4719181824.0    -1
=====MAX====
77296874224.0   194582280384.0  -1      4719181824.0    -1
-------------
defaultdict(<class 'float'>, {'EmbedTime': 338.86435160636904, 'EmbedCommTime': 59.00809236296918, 'ËmbedCommByte': 73716.04368591309, 'NormTime': 1.1195680141448974, 'NormCommTime': 0.2668283278355375, 'NormCommByte': 5.90625, 'LinearTime': 243.31016793251038, 'LinearCommTime': 79.64493292360567, 'LinearCommByte': 185568.12322998047, 'ActivTime': 59.39364347457886, 'ActivCommTime': 16.360449552861972, 'ActivCommByte': 4500.5625, 'SMAMTime': 129.579931306839, 'SMAMCommTime': 35.37902967678383, 'SMAMCommByte': 14627.023803710938, 'total_time': 774.0945526599884})

*** TODO merge no res
** TODO T5 
*** TODO t5 vanilla
*** TODO mpcFormer softmax2relu
*** TODO mpcFormer softmax2quad
*** TODO THE-X i.e. XXX
*** TODO merge with res
*** TODO merge only ER
*** TODO merge only MM
*** TODO merge no res
** TODO Bart
*** TODO t5 vanilla
*** TODO mpcFormer softmax2relu
*** TODO mpcFormer softmax2quad
*** TODO THE-X i.e. XXX
*** TODO merge with res
*** TODO merge only ER
*** TODO merge only MM
*** TODO merge no res
* TODO Vary Model Size
x轴设定： 5个point，从124M到6B，在GPT上进行
曲线：四条即可，merge, gpt2, thex, mpcformer
* TODO Vary Sequence Length
x轴设定： 5个point: 64 128 256 512 1024，在GPT上进行
曲线：四条即可，merge, gpt2, thex, mpcformer
