#+title: 实验结果图
#+date: Mon Feb 27 09:41:12 2023
#+author: Zi Liang
#+email: liangzid@stu.xjtu.edu.cn
#+latex_class: elegantpaper
#+filetags: ::

* 提升效果-验证想法的章节
** vary epochs 

|---------+--------|
| items   | values |
|---------+--------|
| dataset |    e2e |
| dropout |    0.6 |
| lr      |   8e-5 |
|---------+--------|

eval on last 100 samples.

results:

|-----------+--------+---------|
|     epoch |   BLEU | rouge-L |
|-----------+--------+---------|
|         1 | 0.3424 |  0.3930 |
|         2 | 0.3797 |  0.4189 |
|         3 | 0.4194 |  0.3982 |
|         4 | 0.4146 |  0.4139 |
|         5 | 0.3650 |  0.4098 |
|   finally | 0.3650 |  0.4090 |
|   bestval | 0.0926 |  0.2583 |
|  trainmin | 0.4093 |  0.4190 |
| w.o. EmRs |        |         |
|-----------+--------+---------|

结论：存在明显的过拟合现象。但是总体效果并不佳.
应该测试：
1. dropout too large?
2. other things...

** 测试采样的测试集是否合理
using trainmin in chapter =vary epochs=

|------------------+--------+---------|
| key              |   BLEU | rouge-L |
|------------------+--------+---------|
| last 100         | 0.4093 |  0.4190 |
| first 100        | 0.4872 |  0.4843 |
| 500-600          | 0.4358 |  0.4386 |
| overall          | 0.4653 |  0.4452 |
| all-final(dr0.6) | 0.4531 |  0.4430 |
| all-vanilla      | 0.6381 |  0.4871 |
|------------------+--------+---------|

train model seems better than finally ckpt.

结论：应该使用全部的测试集进行效果调优。部分数据集的结果很不准。

** vary dropout Training

吸取了上次的结果，这次采用所有的测试集进行实验

|-------------+--------+---------+---------+-----------|
|     dropout |   BLEU | rouge-L | ep2BLEU | ep2rougeL |
|-------------+--------+---------+---------+-----------|
|         0.4 | 0.3734 |  0.4046 |         |           |
|         0.5 | 0.4297 |  0.4183 |         |           |
|         0.6 | 0.4531 |  0.4430 |         |           |
|         0.7 | 0.4560 |  0.4333 |  0.4126 |    0.4365 |
|         0.8 | 0.4441 |  0.4369 |         |           |
| all-vanilla | 0.6381 |  0.4871 |         |           |
|-------------+--------+---------+---------+-----------|

测试结果：dropout选择0.7左右较佳

** The effectiveness of noise

dropout=0.7

|-----------------+--------+---------|
| noise threshold |   BLEU | rouge-L |
|-----------------+--------+---------|
|             0.1 |        |         |
|             0.2 | 0.4560 |  0.4333 |
|             0.3 |        |         |
|             0.4 |        |         |
|             0.5 |        |         |
|             0.6 |        |         |
|             0.7 |        |         |
|             0.8 |        |         |
|     all-vanilla | 0.6381 |  0.4871 |
|-----------------+--------+---------|


** Vary other training losses.

+ CE: vanilla crossEntropy
+ cosEm: consine embedding
+ mseEm: MSE embedding
+ SCE: tempratured CE
+ MSEh: MSE of hidden states


|-------------+------+---------|
| loss type   | BLEU | rouge-L |
|-------------+------+---------|
| CE          |      |         |
| CE+cosEM    |      |         |
| CE+mseEM    |      |         |
| CE+SCE+?EM  |      |         |
| CE+MSEh+?EM |      |         |
|-------------+------+---------|


** 

* 总体结果表格


| model   |   bleu | meteor |  chrf++ | nist_mt |   rou1 |   rou2 |   rouL | rouSum |
|---------+--------+--------+---------+---------+--------+--------+--------+--------|
| vanGPT2 | 0.6381 | 0.6162 | 58.6091 |  5.9059 | 0.6791 | 0.4172 | 0.4871 | 0.4873 |
|---------+--------+--------+---------+---------+--------+--------+--------+--------|
|  |        |        |         |         |        |        |        |        |








